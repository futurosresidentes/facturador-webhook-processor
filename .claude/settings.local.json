{
  "permissions": {
    "allow": [
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Mejorar notificaciÃ³n de Google Chat con resumen completo del recorrido\n\nMEJORAS EN NOTIFICACIÃ“N:\n- Mensaje estructurado con secciones claramente divididas\n- InformaciÃ³n general: ref_payco, invoice_id, email, producto, monto\n- Datos del cliente: nombres, apellidos, cÃ©dula, telÃ©fono, ciudad, direcciÃ³n, comercial\n- Recorrido completo de procesamiento (10 pasos):\n  1. ExtracciÃ³n Invoice ID\n  2. Consulta FR360\n  3. CRM (created/updated con ID)\n  4. MembresÃ­as (lista detallada)\n  5. NotificaciÃ³n Callbell\n  6. World Office - Cliente\n  7. World Office - Factura\n  8. World Office - ContabilizaciÃ³n\n  9. World Office - EmisiÃ³n DIAN\n  10. Strapi - Guardar Venta\n- URL de activaciÃ³n\n- MÃ©tricas: total de reintentos, tiempo de procesamiento\n\nVENTAJAS:\n- Visibilidad completa del flujo procesado\n- FÃ¡cil detecciÃ³n de quÃ© pasos se completaron\n- AnÃ¡lisis detallado del recorrido del webhook\n- IdentificaciÃ³n rÃ¡pida de performance (tiempo, reintentos)\n\nCOMPATIBILIDAD:\n- Backward compatible: acepta data parcial\n- Solo muestra secciones con datos disponibles\n- Funciona con flujo actual (pasos 1-3) y flujo completo (10 pasos)\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git add -A)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat: Pasar datos completos del recorrido a notificaciÃ³n de Google Chat\n\nCAMBIOS EN webhookProcessor.js:\n- AÃ±adir variables de rastreo: startTime, completedStages, totalRetries\n- Marcar cada stage como completado cuando finaliza:\n  * Stage 1: invoice_extraction\n  * Stage 2: fr360_query\n  * Stage 3: crm (upsert)\n  * Stage 4: memberships (si aplica)\n- Capturar tiempo total de procesamiento (processingTimeMs)\n- Construir array de membresÃ­as con nombre y status\n- Pasar datos completos a notifySuccess():\n  * webhookRef (ref_payco)\n  * customerData (nombres, apellidos, cedula, telefono, ciudad, direccion, comercial)\n  * crmAction (created/updated)\n  * stages (objeto con stages completados)\n  * memberships (array de membresÃ­as)\n  * totalRetries y processingTimeMs\n\nRESULTADO:\n- La notificaciÃ³n de Google Chat ahora mostrarÃ¡ TODAS las secciones:\n  * ðŸ“‹ InformaciÃ³n General\n  * ðŸ‘¤ Datos del Cliente\n  * ðŸ”„ Recorrido de Procesamiento (con checkmarks âœ“ en cada paso)\n  * ðŸ”— ActivaciÃ³n\n  * ðŸ“Š MÃ©tricas (tiempo de procesamiento)\n\nNOTA:\n- crmAction se asume ''updated'' porque crmService.js actual no devuelve esta info\n- Cuando migremos a crmService.v2.js tendremos ''created'' o ''updated'' real\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push)"
    ],
    "deny": [],
    "ask": []
  }
}
